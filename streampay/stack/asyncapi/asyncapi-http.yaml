asyncapi: 3.0.0
id: 'tag:stream.oay.im,2023:api'
info:
  title: StreamPay API
  version: 1.0.0
servers:
  plain_sse:
    host: localhost:7114
    protocol: sse
  plain_http:
    host: localhost:7114
    protocol: http
channels:
  streampay-commands:
    address: '/streampay-commands'
    messages:
      StreampayCommands.message:
        $ref: '#/components/messages/StreampayCommandsMessage'
    description: <nil>
  streampay-commands-item:
    address: '/streampay-commands/{id}'
    messages:
      StreampayCommands.message:
        $ref: '#/components/messages/StreampayCommandsMessage'
      StreampayEmpty.message:
        $ref: '#/components/messages/StreampayEmptyMessage'
    description: <nil>
    parameters:
      id:
        description: Id of the streampay commands item.
  streampay-users:
    address: '/streampay-users'
    messages:
      StreampayUsers.message:
        $ref: '#/components/messages/StreampayUsersMessage'
      StreampayItemsUsers.message:
        $ref: '#/components/messages/StreampayUsersItemsMessage'
    description: <nil>
  streampay-users-item:
    address: '/streampay-users/{id}'
    messages:
      StreampayUsers.message:
        $ref: '#/components/messages/StreampayUsersMessage'
      StreampayEmpty.message:
        $ref: '#/components/messages/StreampayEmptyMessage'
    description: <nil>
    parameters:
      id:
        description: Id of the streampay users item.
        examples:
          - 53307860c3599d1de448e19d
  streampay-balances:
    address: '/streampay-balances'
    messages:
      StreampayBalances.message:
        $ref: '#/components/messages/StreampayBalancesMessage'
    description: <nil>
  streampay-balances-item:
    address: '/streampay-balances/{id}'
    messages:
      StreampayBalances.message:
        $ref: '#/components/messages/StreampayBalancesMessage'
      StreampayEmpty.message:
        $ref: '#/components/messages/StreampayEmptyMessage'
    description: <nil>
    parameters:
      id:
        description: Id of the streampay balance item.
        examples:
          - 53307860c3599d1de448e19d
  streampay-request-payment:
    address: '/streampay-request-payment'
    messages:
      StreampayRequestPayment.message:
        $ref: '#/components/messages/StreampayRequestPaymentMessage'
    description: <nil>
  streampay-request-payments:
    address: '/streampay-request-payments'
    messages:
      StreampayRequestPayment.message:
        $ref: '#/components/messages/StreampayRequestPaymentMessage'
      StreampayRequestPaymentsItemsMessage.message:
        $ref: '#/components/messages/StreampayRequestPaymentsItemsMessage'
    description: <nil>
  streampay-request-payments-item:
    address: '/streampay-request-payments/{id}'
    messages:
      StreampayRequestPayment.message:
        $ref: '#/components/messages/StreampayRequestPaymentMessage'
      StreampayEmpty.message:
        $ref: '#/components/messages/StreampayEmptyMessage'
    description: <nil>
    parameters:
      id:
        description: Id of the streampay balance item.
        examples:
          - 53307860c3599d1de448e19d
operations:
  doStreampayCommandsCreate:
    action: send
    channel:
      $ref: '#/channels/streampay-commands'
    bindings:
      http:
        method: POST
    messages:
      - $ref: '#/channels/streampay-commands/messages/StreampayCommands.message'
  doStreampayCommandsUpdate:
    action: send
    channel:
      $ref: '#/channels/streampay-commands-item'
    bindings:
      http:
        method: PUT
    messages:
      - $ref: '#/channels/streampay-commands-item/messages/StreampayCommands.message'
  doStreampayCommandsDelete:
    action: send
    channel:
      $ref: '#/channels/streampay-commands-item'
    bindings:
      http:
        method: DELETE
    messages:
      - $ref: '#/channels/streampay-commands-item/messages/StreampayEmpty.message'
  doStreampayUsersCreate:
    action: send
    channel:
      $ref: '#/channels/streampay-users'
    bindings:
      http:
        method: POST
    messages:
      - $ref: '#/channels/streampay-users/messages/StreampayUsers.message'
  onStreampayUserRead:
    action: receive
    channel:
      $ref: '#/channels/streampay-users-item'
    bindings:
      http:
        method: GET
    messages:
      - $ref: '#/channels/streampay-users-item/messages/StreampayUsers.message'
  onStreampayUsersRead:
    action: receive
    channel:
      $ref: '#/channels/streampay-users'
    bindings:
      http:
        method: GET
    messages:
      - $ref: '#/channels/streampay-users/messages/StreampayItemsUsers.message'
  doStreampayUserUpdate:
    action: send
    channel:
      $ref: '#/channels/streampay-users-item'
    bindings:
      http:
        method: PUT
    messages:
      - $ref: '#/channels/streampay-users-item/messages/StreampayUsers.message'
  doStreampayUserDelete:
    action: send
    channel:
      $ref: '#/channels/streampay-users-item'
    bindings:
      http:
        method: DELETE
    messages:
      - $ref: '#/channels/streampay-users-item/messages/StreampayEmpty.message'
  doStreampayBalanceCreate:
    action: send
    channel:
      $ref: '#/channels/streampay-balances'
    bindings:
      http:
        method: POST
    messages:
      - $ref: '#/channels/streampay-balances/messages/StreampayBalances.message'
  onStreampayBalanceRead:
    action: receive
    channel:
      $ref: '#/channels/streampay-balances-item'
    bindings:
      http:
        method: GET
    messages:
      - $ref: '#/channels/streampay-balances-item/messages/StreampayBalances.message'
  doStreampayBalanceUpdate:
    action: send
    channel:
      $ref: '#/channels/streampay-balances-item'
    bindings:
      http:
        method: PUT
    messages:
      - $ref: '#/channels/streampay-balances-item/messages/StreampayBalances.message'
  doStreampayBalanceDelete:
    action: send
    channel:
      $ref: '#/channels/streampay-balances-item'
    bindings:
      http:
        method: DELETE
    messages:
      - $ref: '#/channels/streampay-balances-item/messages/StreampayEmpty.message'
  onStreampayBalances:
    action: receive
    channel:
      $ref: '#/channels/streampay-balances'
    messages:
      - $ref: '#/channels/streampay-balances/messages/StreampayBalances.message'
  onStreampayRequestPayment:
    action: receive
    channel:
      $ref: '#/channels/streampay-request-payment'
    messages:
      - $ref: '#/channels/streampay-request-payment/messages/StreampayRequestPayment.message'
  onStreampayRequestPaymentsReads:
    action: receive
    channel:
      $ref: '#/channels/streampay-request-payments'
    bindings:
      http:
        method: GET
    messages:
      - $ref: '#/channels/streampay-request-payments/messages/StreampayRequestPaymentsItemsMessage.message'
  onStreampayRequestPaymentRead:
    action: receive
    channel:
      $ref: '#/channels/streampay-request-payments-item'
    bindings:
      http:
        method: GET
    messages:
      - $ref: '#/channels/streampay-request-payments-item/messages/StreampayRequestPayment.message'
components:
  messages:
    StreampayCommandsMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayCommand'
      name: StreampayCommandsMessage
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayUsersMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayUser'
      name: StreampayUsersMessage
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayUsersItemsMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayUsers'
      name: StreampayUsersMessage
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayBalancesMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayBalance'
      name: StreampayBalancesMessage
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayRequestPaymentsItemsMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayRequestPayments'
      name: StreampayRequestPayments
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayRequestPaymentMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayRequestPayment'
      name: StreampayRequestPaymentMessage
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
    StreampayEmptyMessage:
      contentType: application/json
      payload:
        $ref: '#/components/schemas/StreampayEmpty'
      bindings:
        http:
          headers:
            type: object
            properties:
              Transfer-Encoding:
                type: string
                const: chunked
              Trailer:
                type: string
                const: \r\n
  schemas:
    StreampayCommand:
      type: object
      properties:
        type:
          type: string
        userid:
          type: string
        requestid:
          type: string
        amount:
          type: number
        notes:
          type: string
      name: PaymentCommand
      namespace: com.example
    StreampayUser:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        username:
          type: string
      name: User
      namespace: com.example
    StreampayUsers:
      type: array
      items:
        $ref: "#/components/schemas/StreampayUser"
      name: Users
      namespace: com.example
    StreampayBalance:
      type: object
      properties:
        id:
          type: string
        fromuserid:
          type: string
        fromusername:
          type: string
        touserid:
          type: string
        tousername:
          type: string
        amount:
          type: number
        notes:
          type: string
      name: Balance
      namespace: com.example
    StreampayRequestPayment:
      type: object
      properties:
        balance:
          type: number
        timepstamp:
          type: number
      name: RequestPaymen
      namespace: com.example
    StreampayRequestPayments:
      type: array
      items:
        $ref: "#/components/schemas/StreampayRequestPayment"
      name: RequestPayments
      namespace: com.example
    StreampayEmpty:
      type: object
      name: Empty
      namespace: com.example
