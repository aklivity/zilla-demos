asyncapi: 2.4.0
info:
  title: API Document for Confluent Cluster
  version: 1.0.0
servers:
  cluster:
    url: https://pkc-41p56.asia-south1.gcp.confluent.cloud:443
    description: Confluent Kafka instance.
    protocol: kafka
    security:
    - confluentBroker: []
  schema-registry:
    url: https://psrc-e8157.us-east-2.aws.confluent.cloud
    description: Confluent Kafka Schema Registry Server
    protocol: kafka
    security:
    - confluentSchemaRegistry: []
channels:
  sp-commands:
    description: <nil>
    subscribe:
      operationId: SpCommandsSubscribe
      bindings:
        kafka:
          bindingVersion: 0.3.0
          groupId:
            type: string
          clientId:
            type: string
      message:
        $ref: '#/components/messages/SpCommandsMessage'
    bindings:
      kafka:
        bindingVersion: 0.4.0
        partitions: 1
        topicConfiguration:
          cleanup.policy:
          - delete
          retention.ms: 6.048e+08
          retention.bytes: -1
          delete.retention.ms: 8.64e+07
          max.message.bytes: 2.097164e+06
        x-configs:
          compression.type: producer
          file.delete.delay.ms: "60000"
          flush.messages: "9223372036854775807"
          flush.ms: "9223372036854775807"
          follower.replication.throttled.replicas: ""
          index.interval.bytes: "4096"
          leader.replication.throttled.replicas: ""
          local.retention.bytes: "-2"
          local.retention.ms: "-2"
          max.compaction.lag.ms: "9223372036854775807"
          message.downconversion.enable: "true"
          message.format.version: 3.0-IV1
          message.timestamp.after.max.ms: "9223372036854775807"
          message.timestamp.before.max.ms: "9223372036854775807"
          message.timestamp.difference.max.ms: "9223372036854775807"
          message.timestamp.type: CreateTime
          min.cleanable.dirty.ratio: "0.5"
          min.compaction.lag.ms: "0"
          min.insync.replicas: "2"
          preallocate: "false"
          remote.storage.enable: "false"
          segment.bytes: "104857600"
          segment.index.bytes: "10485760"
          segment.jitter.ms: "0"
          segment.ms: "604800000"
          unclean.leader.election.enable: "false"
    x-messageCompatibility: BACKWARD
  sp-replies:
    description: <nil>
    subscribe:
      operationId: SpRepliesSubscribe
      bindings:
        kafka:
          bindingVersion: 0.3.0
          groupId:
            type: string
          clientId:
            type: string
      message:
        $ref: '#/components/messages/SpRepliesMessage'
    bindings:
      kafka:
        bindingVersion: 0.4.0
        partitions: 1
        topicConfiguration:
          cleanup.policy:
          - delete
          retention.ms: 6.048e+08
          retention.bytes: -1
          delete.retention.ms: 8.64e+07
          max.message.bytes: 2.097164e+06
        x-configs:
          compression.type: producer
          file.delete.delay.ms: "60000"
          flush.messages: "9223372036854775807"
          flush.ms: "9223372036854775807"
          follower.replication.throttled.replicas: ""
          index.interval.bytes: "4096"
          leader.replication.throttled.replicas: ""
          local.retention.bytes: "-2"
          local.retention.ms: "-2"
          max.compaction.lag.ms: "9223372036854775807"
          message.downconversion.enable: "true"
          message.format.version: 3.0-IV1
          message.timestamp.after.max.ms: "9223372036854775807"
          message.timestamp.before.max.ms: "9223372036854775807"
          message.timestamp.difference.max.ms: "9223372036854775807"
          message.timestamp.type: CreateTime
          min.cleanable.dirty.ratio: "0.5"
          min.compaction.lag.ms: "0"
          min.insync.replicas: "2"
          preallocate: "false"
          remote.storage.enable: "false"
          segment.bytes: "104857600"
          segment.index.bytes: "10485760"
          segment.jitter.ms: "0"
          segment.ms: "604800000"
          unclean.leader.election.enable: "false"
    x-messageCompatibility: BACKWARD
  sp-user-balances:
    description: <nil>
    subscribe:
      operationId: SpUserBalancesSubscribe
      bindings:
        kafka:
          bindingVersion: 0.3.0
          groupId:
            type: string
          clientId:
            type: string
      message:
        $ref: '#/components/messages/SpUserBalancesMessage'
    bindings:
      kafka:
        bindingVersion: 0.4.0
        partitions: 1
        topicConfiguration:
          cleanup.policy:
          - delete
          retention.ms: 6.048e+08
          retention.bytes: -1
          delete.retention.ms: 8.64e+07
          max.message.bytes: 2.097164e+06
        x-configs:
          compression.type: producer
          file.delete.delay.ms: "60000"
          flush.messages: "9223372036854775807"
          flush.ms: "9223372036854775807"
          follower.replication.throttled.replicas: ""
          index.interval.bytes: "4096"
          leader.replication.throttled.replicas: ""
          local.retention.bytes: "-2"
          local.retention.ms: "-2"
          max.compaction.lag.ms: "9223372036854775807"
          message.downconversion.enable: "true"
          message.format.version: 3.0-IV1
          message.timestamp.after.max.ms: "9223372036854775807"
          message.timestamp.before.max.ms: "9223372036854775807"
          message.timestamp.difference.max.ms: "9223372036854775807"
          message.timestamp.type: CreateTime
          min.cleanable.dirty.ratio: "0.5"
          min.compaction.lag.ms: "0"
          min.insync.replicas: "2"
          preallocate: "false"
          remote.storage.enable: "false"
          segment.bytes: "104857600"
          segment.index.bytes: "10485760"
          segment.jitter.ms: "0"
          segment.ms: "604800000"
          unclean.leader.election.enable: "false"
    x-messageCompatibility: BACKWARD
  sp-users:
    description: <nil>
    subscribe:
      operationId: SpUsersSubscribe
      bindings:
        kafka:
          bindingVersion: 0.3.0
          groupId:
            type: string
          clientId:
            type: string
      message:
        $ref: '#/components/messages/SpUsersMessage'
    bindings:
      kafka:
        bindingVersion: 0.4.0
        partitions: 1
        topicConfiguration:
          cleanup.policy:
          - delete
          retention.ms: 6.048e+08
          retention.bytes: -1
          delete.retention.ms: 8.64e+07
          max.message.bytes: 2.097164e+06
        x-configs:
          compression.type: producer
          file.delete.delay.ms: "60000"
          flush.messages: "9223372036854775807"
          flush.ms: "9223372036854775807"
          follower.replication.throttled.replicas: ""
          index.interval.bytes: "4096"
          leader.replication.throttled.replicas: ""
          local.retention.bytes: "-2"
          local.retention.ms: "-2"
          max.compaction.lag.ms: "9223372036854775807"
          message.downconversion.enable: "true"
          message.format.version: 3.0-IV1
          message.timestamp.after.max.ms: "9223372036854775807"
          message.timestamp.before.max.ms: "9223372036854775807"
          message.timestamp.difference.max.ms: "9223372036854775807"
          message.timestamp.type: CreateTime
          min.cleanable.dirty.ratio: "0.5"
          min.compaction.lag.ms: "0"
          min.insync.replicas: "2"
          preallocate: "false"
          remote.storage.enable: "false"
          segment.bytes: "104857600"
          segment.index.bytes: "10485760"
          segment.jitter.ms: "0"
          segment.ms: "604800000"
          unclean.leader.election.enable: "false"
    x-messageCompatibility: BACKWARD
components:
  messages:
    SpCommandsMessage:
      schemaFormat: application/vnd.apache.avro;version=1.9.0
      contentType: application/avro
      payload:
        fields:
        - name: type
          type: string
        - name: userid
          type: string
        - name: requestid
          type: string
        - name: amount
          type: double
        - name: notes
          type: string
        name: PaymentCommand
        namespace: com.example
        type: record
      name: SpCommandsMessage
      bindings:
        kafka:
          bindingVersion: 0.3.0
          key:
            type: string
    SpRepliesMessage:
      schemaFormat: application/vnd.apache.avro;version=1.9.0
      contentType: application/avro
      payload:
        fields:
        - name: status
          type: string
        - name: correlationid
          type: string
        name: Replies
        namespace: com.example
        type: record
      name: SpRepliesMessage
      bindings:
        kafka:
          bindingVersion: 0.3.0
          key:
            type: string
    SpUserBalancesMessage:
      schemaFormat: application/vnd.apache.avro;version=1.9.0
      contentType: application/avro
      payload:
        fields:
        - name: userid
          type: string
        - name: balance
          type: double
        name: UserBalance
        namespace: com.example
        type: record
      name: SpUserBalancesMessage
      bindings:
        kafka:
          bindingVersion: 0.3.0
          key:
            type: string
    SpUsersMessage:
      schemaFormat: application/vnd.apache.avro;version=1.9.0
      contentType: application/avro
      payload:
        fields:
        - name: id
          type: string
        - name: name
          type: string
        - name: username
          type: string
        name: User
        namespace: com.example
        type: record
      name: SpUsersMessage
      bindings:
        kafka:
          bindingVersion: 0.3.0
          key:
            type: string
  securitySchemes:
    confluentBroker:
      type: userPassword
      x-configs:
        sasl.mechanisms: PLAIN
        sasl.password: '{{CLUSTER_API_SECRET}}'
        sasl.username: '{{CLUSTER_API_KEY}}'
        security.protocol: sasl_ssl
    confluentSchemaRegistry:
      type: userPassword
      x-configs:
        basic.auth.user.info: '{{SCHEMA_REGISTRY_API_KEY}}:{{SCHEMA_REGISTRY_API_SECRET}}'
