---
name: taxi-openapi-asyncapi
bindings:
  openapi_server:
    type: openapi
    kind: server
    options:
      specs:
        taxi-openapi-spec: taxi-openapi.yaml
    exit: openapi_asyncapi_proxy
  openapi_asyncapi_proxy:
    type: openapi-asyncapi
    kind: proxy
    options:
      specs:
        openapi:
          taxi-openapi-spec: taxi-openapi.yaml
        asyncapi:
          taxi-asyncapi-spec: taxi-asyncapi.yaml
    routes:
      - when:
          - api-id: taxi-openapi-spec
        exit: asyncapi_client
        with:
          api-id: taxi-asyncapi-spec
  asyncapi_client:
    type: asyncapi
    kind: client
    options:
      specs:
        taxi-asyncapi-spec: taxi-asyncapi.yaml
